# Makefile.in

.PRECIOUS: Makefile
.SUFFIXES: .c .o .a

srcdir = @srcdir@

CC = @CC@
CFLAGS = @CFLAGS@
CPP = @CPP@
CPPFLAGS = @CPPFLAGS@
LD = @LD@
LDFLAGS = @LDFLAGS@
AR = @AR@
ARFLAGS = @ARFLAGS@
RANLIB = @RANLIB@
LIBS = @LIBS@
RM_F = @RM_F@

PNMIO_LIB = libpnmio.a
PNMIO_OBJS = pnmin.o pnmout.o pnmutil.o

.PHONY: all
all: $(PNMIO_LIB)

.PHONY: test
test:
	@echo TODO: test $(PNMIO_LIB)

.PHONY: check
check: test

.c.o:
	$(CC) -c $(CPPFLAGS) $(CFLAGS) -o $@ $<

$(PNMIO_LIB): $(PNMIO_OBJS)
	$(AR) $(ARFLAGS) $@ $(PNMIO_OBJS)
	$(RANLIB) $@

pnmin.o: $(srcdir)/pnmin.c $(srcdir)/pnmio.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) -o $@ $<

pnmout.o: $(srcdir)/pnmout.c $(srcdir)/pnmio.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) -o $@ $<

pnmutil.o: $(srcdir)/pnmutil.c $(srcdir)/pnmio.h
	$(CC) -c $(CPPFLAGS) $(CFLAGS) -o $@ $<

.PHONY: clean
clean:
	-$(RM_F) $(PNMIO_LIB) $(PNMIO_OBJS)

.PHONY: distclean
distclean: clean
